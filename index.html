<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScoutMe - ุงูุชุดู ุงูููุงูุจ ุงูุฑูุงุถูุฉ</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <!-- Google Maps API (ุฃุถู API Key ุงูุฎุงุต ุจู) -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p data-i18n="loading">ุฌุงุฑู ุงูุชุญููู...</p>
    </div>

    <!-- Registration Overlay (Pi Network Authentication) -->
    <div id="reg-overlay" class="reg-overlay">
        <div class="reg-content">
            <img src="image/logo.png" alt="ScoutMe Logo" class="reg-logo">
            <h1 data-i18n="welcome_to_scoutme">ูุฑุญุจุง ุจู ูู ScoutMe</h1>
            <p data-i18n="pi_network_login_desc">ุณุฌู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู Pi Network ุฃู Firebase ูููุตูู ุฅูู ุงูููุตุฉ</p>
            <button class="btn-pi-signin" onclick="piSignIn()">
                <span class="pi-icon">ฯ</span>
                <span data-i18n="signin_with_pi">ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ Pi Network</span>
            </button>
            <button class="btn-firebase-signin" onclick="firebaseSignIn()">
                <span class="firebase-icon">๐ฅ</span>
                <span data-i18n="signin_with_firebase">ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ Firebase</span>
            </button>
        </div>
    </div>

    <!-- Language Selector -->
    <div class="language-selector">
        <select id="languageSelect" onchange="changeLanguage(this.value)">
            <option value="ar">ุงูุนุฑุจูุฉ ๐ธ๐ฆ</option>
            <option value="en">English ๐ฌ๐ง</option>
            <option value="fr">Franรงais ๐ซ๐ท</option>
            <option value="es">Espaรฑol ๐ช๐ธ</option>
            <option value="de">Deutsch ๐ฉ๐ช</option>
            <option value="pt">Portuguรชs ๐ต๐น</option>
            <option value="it">Italiano ๐ฎ๐น</option>
            <option value="ru">ะัััะบะธะน ๐ท๐บ</option>
            <option value="zh">ไธญๆ ๐จ๐ณ</option>
            <option value="ja">ๆฅๆฌ่ช ๐ฏ๐ต</option>
            <option value="ko">ํ๊ตญ์ด ๐ฐ๐ท</option>
            <option value="tr">Tรผrkรงe ๐น๐ท</option>
            <option value="hi">เคนเคฟเคจเฅเคฆเฅ ๐ฎ๐ณ</option>
            <option value="bn">เฆฌเฆพเฆเฆฒเฆพ ๐ง๐ฉ</option>
            <option value="ur">ุงุฑุฏู ๐ต๐ฐ</option>
        </select>
    </div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="notification-toast">
        <span class="notification-icon">๐</span>
        <span class="notification-message"></span>
        <button class="notification-close" onclick="closeNotification()">&times;</button>
    </div>

    <!-- Header -->
    <header class="app-header">
        <div class="logo">
            <img src="image/logo.png" alt="ScoutMe" class="logo-image">
            <span class="logo-text" data-i18n="appName">ScoutMe</span>
        </div>
        <div class="header-actions">
            <button class="notification-btn" onclick="toggleNotifications()">
                <span class="notification-icon">๐</span>
                <span class="notification-badge" id="notificationBadge">0</span>
            </button>
            <button class="wallet-btn" onclick="openWalletModal()">
                <span class="wallet-icon">ฯ</span>
                <span class="wallet-balance" id="walletBalance">0 Pi</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Home Page -->
        <section id="homePage" class="page active">
            <!-- Banner -->
            <div class="banner">
                <div class="banner-content">
                    <h1 data-i18n="bannerTitle">ุงูุชุดู ูุฌูู ุงููุณุชูุจู</h1>
                    <p data-i18n="bannerSubtitle">ููุตุฉ ุนุงูููุฉ ููููุงูุจ ุงูุฑูุงุถูุฉ</p>
                </div>
            </div>

            <!-- Analytics Cards (ููุฅุญุตุงุฆูุงุช ุงูุณุฑูุนุฉ) -->
            <div class="analytics-quick-view">
                <div class="analytics-card">
                    <div class="analytics-icon">๐ค</div>
                    <div class="analytics-value" id="totalPlayers">0</div>
                    <div class="analytics-label" data-i18n="total_players">ูุฌููุน ุงููุงุนุจูู</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">๐</div>
                    <div class="analytics-value" id="totalTeams">0</div>
                    <div class="analytics-label" data-i18n="total_teams">ูุฌููุน ุงููุฑู</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">๐</div>
                    <div class="analytics-value" id="totalAcademies">0</div>
                    <div class="analytics-label" data-i18n="total_academies">ุงูุฃูุงุฏูููุงุช</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-icon">๐๏ธ</div>
                    <div class="analytics-value" id="totalShops">0</div>
                    <div class="analytics-label" data-i18n="total_shops">ุงููุญูุงุช</div>
                </div>
            </div>

            <!-- Spotlight Talents -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="spotlightTalents">ููุงูุจ ูููุฒุฉ</h2>
                    <a href="#" onclick="navigateToPage('talentsPage')" class="view-all" data-i18n="viewAll">ุนุฑุถ ุงููู</a>
                </div>
                <div class="horizontal-scroll" id="spotlightContainer">
                    <!-- Dynamic content -->
                </div>
            </div>

            <!-- Map Section -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="mapView">ุงูุฎุฑูุทุฉ ุงูุชูุงุนููุฉ</h2>
                </div>
                <div id="mapContainer" class="map-container"></div>
            </div>

            <!-- Latest News -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="latestNews">ุขุฎุฑ ุงูุฃุฎุจุงุฑ</h2>
                </div>
                <div class="news-list" id="newsContainer">
                    <!-- Dynamic content -->
                </div>
            </div>
        </section>

        <!-- Discover Page -->
        <section id="discoverPage" class="page">
            <div class="search-section">
                <div class="search-bar">
                    <span class="search-icon">๐</span>
                    <input type="text" id="searchInput" data-i18n-placeholder="searchPlaceholder" placeholder="ุงูุจุญุซ ุนู ุงููุงุนุจููุ ุงููุฑูุ ุงูุฃูุงุฏูููุงุช...">
                </div>
                
                <!-- Advanced Filters -->
                <div class="advanced-filters">
                    <select id="filterType" class="filter-select">
                        <option value="all" data-i18n="all_types">ูู ุงูุฃููุงุน</option>
                        <option value="players" data-i18n="players">ุงููุงุนุจูู</option>
                        <option value="teams" data-i18n="teams">ุงููุฑู</option>
                        <option value="academies" data-i18n="academies">ุงูุฃูุงุฏูููุงุช</option>
                        <option value="shops" data-i18n="shops">ุงููุญูุงุช</option>
                    </select>
                    
                    <select id="filterSport" class="filter-select">
                        <option value="all" data-i18n="allSports">ูู ุงูุฑูุงุถุงุช</option>
                        <!-- Dynamic sports options -->
                    </select>
                    
                    <select id="filterCountry" class="filter-select">
                        <option value="all" data-i18n="all_countries">ูู ุงูุฏูู</option>
                        <!-- Dynamic country options -->
                    </select>
                    
                    <select id="filterCity" class="filter-select">
                        <option value="all" data-i18n="all_cities">ูู ุงููุฏู</option>
                        <!-- Dynamic city options -->
                    </select>
                    
                    <button class="btn-filter-reset" onclick="resetFilters()" data-i18n="reset_filters">ุฅุนุงุฏุฉ ุชุนููู</button>
                </div>
                
                <div class="filters" id="sportsFilters">
                    <!-- Dynamic sports filters -->
                </div>
            </div>
            <div class="grid-view" id="discoverGrid">
                <!-- Dynamic content -->
            </div>
        </section>

        <!-- Talents Page -->
        <section id="talentsPage" class="page">
            <div class="page-header">
                <h1 data-i18n="talentsTitle">ุงูููุงูุจ ุงูุฑูุงุถูุฉ</h1>
                <div class="header-actions-group">
                    <button class="btn-add" onclick="openAddTalentModal()" data-i18n="add_talent">+ ุฅุถุงูุฉ ูููุจุฉ</button>
                    <select id="sortSelect" class="sort-select" onchange="sortTalents()">
                        <option value="rating" data-i18n="sortByRating">ุงูุฃุนูู ุชููููุงู</option>
                        <option value="age" data-i18n="sortByAge">ุญุณุจ ุงูุนูุฑ</option>
                        <option value="country" data-i18n="sortByCountry">ุญุณุจ ุงูุฏููุฉ</option>
                        <option value="sport" data-i18n="sortBySport">ุญุณุจ ุงูุฑูุงุถุฉ</option>
                        <option value="date" data-i18n="sortByDate">ุงูุฃุญุฏุซ</option>
                    </select>
                </div>
            </div>
            <div class="talents-list" id="talentsList">
                <!-- Dynamic content -->
            </div>
        </section>

        <!-- Teams Page -->
        <section id="teamsPage" class="page">
            <div class="page-header">
                <h1 data-i18n="teamsTitle">ุงููุฑู ุงูุฑูุงุถูุฉ</h1>
                <button class="btn-add" onclick="openAddTeamModal()" data-i18n="add_team">+ ุฅุถุงูุฉ ูุฑูู</button>
            </div>
            <div class="teams-list" id="teamsList">
                <!-- Dynamic content -->
            </div>
        </section>

        <!-- Academies Page -->
        <section id="academiesPage" class="page">
            <div class="page-header">
                <h1 data-i18n="academiesTitle">ุงูุฃูุงุฏูููุงุช ุงูุฑูุงุถูุฉ</h1>
                <button class="btn-add" onclick="openAddAcademyModal()" data-i18n="add_academy">+ ุฅุถุงูุฉ ุฃูุงุฏูููุฉ</button>
            </div>
            <div class="academies-list" id="academiesList">
                <!-- Dynamic content -->
            </div>
        </section>

        <!-- Clubs Page -->
        <section id="clubsPage" class="page">
            <div class="page-header">
                <h1 data-i18n="clubsTitle">ุงูุฃูุฏูุฉ ูุงูุฃูุงุฏูููุงุช</h1>
            </div>
            <div class="clubs-list" id="clubsList">
                <!-- Dynamic content -->
            </div>
        </section>

        <!-- Marketplace Page -->
        <section id="marketplacePage" class="page">
            <div class="page-header">
                <h1 data-i18n="marketplace">ุงููุชุฌุฑ</h1>
            </div>
            
            <!-- Team Tokens -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="team_tokens">ุชูููุงุช ุงููุฑู</h2>
                </div>
                <div class="horizontal-scroll" id="teamTokensContainer">
                    <!-- Dynamic content -->
                </div>
            </div>

            <!-- NFT Players -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="nft_players">NFT ุงููุงุนุจูู</h2>
                </div>
                <div class="horizontal-scroll" id="nftPlayersContainer">
                    <!-- Dynamic content -->
                </div>
            </div>

            <!-- Pi Ecosystem Stores -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="pi_stores">ูุชุงุฌุฑ ููุธููุฉ Pi</h2>
                </div>
                <p class="section-desc" data-i18n="marketplace_desc">ุงูุชุดู ูุชุงุฌุฑ ุดุฑููุฉ ุฏุงุฎู ูุธุงู Pi</p>
                <div class="stores-grid" id="storesContainer">
                    <!-- Dynamic content -->
                </div>
            </div>

            <!-- Shops Section -->
            <div class="section">
                <div class="section-header">
                    <h2 data-i18n="shops_section">ูุญูุงุช ุฑูุงุถูุฉ</h2>
                    <button class="btn-add-small" onclick="openAddShopModal()" data-i18n="add_shop">+ ุฅุถุงูุฉ ูุญู</button>
                </div>
                <div class="shops-grid" id="shopsContainer">
                    <!-- Dynamic content -->
                </div>
            </div>
        </section>

        <!-- Dashboard Page (ูููุณุคูููู ูุงููุฏุฑุจูู) -->
        <section id="dashboardPage" class="page">
            <div class="page-header">
                <h1 data-i18n="dashboard">ููุญุฉ ุงูุชุญูู</h1>
            </div>
            
            <!-- Analytics Overview -->
            <div class="analytics-section">
                <h2 data-i18n="analytics_overview">ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุฅุญุตุงุฆูุงุช</h2>
                <div class="analytics-grid">
                    <div class="analytics-large-card">
                        <h3 data-i18n="players_by_sport">ุงููุงุนุจูู ุญุณุจ ุงูุฑูุงุถุฉ</h3>
                        <canvas id="sportChart"></canvas>
                    </div>
                    <div class="analytics-large-card">
                        <h3 data-i18n="players_by_country">ุงููุงุนุจูู ุญุณุจ ุงูุฏููุฉ</h3>
                        <canvas id="countryChart"></canvas>
                    </div>
                    <div class="analytics-large-card">
                        <h3 data-i18n="top_rated">ุงูุฃุนูู ุชููููุงู</h3>
                        <div id="topRatedList"></div>
                    </div>
                    <div class="analytics-large-card">
                        <h3 data-i18n="recent_activity">ุงููุดุงุท ุงูุฃุฎูุฑ</h3>
                        <div id="recentActivityList"></div>
                    </div>
                </div>
            </div>

            <!-- Management Tools -->
            <div class="management-section">
                <h2 data-i18n="management_tools">ุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ</h2>
                <div class="management-grid">
                    <button class="management-btn" onclick="openManagePlayers()">
                        <span class="management-icon">๐ฅ</span>
                        <span data-i18n="manage_players">ุฅุฏุงุฑุฉ ุงููุงุนุจูู</span>
                    </button>
                    <button class="management-btn" onclick="openManageTeams()">
                        <span class="management-icon">๐</span>
                        <span data-i18n="manage_teams">ุฅุฏุงุฑุฉ ุงููุฑู</span>
                    </button>
                    <button class="management-btn" onclick="openManageAcademies()">
                        <span class="management-icon">๐</span>
                        <span data-i18n="manage_academies">ุฅุฏุงุฑุฉ ุงูุฃูุงุฏูููุงุช</span>
                    </button>
                    <button class="management-btn" onclick="openManageShops()">
                        <span class="management-icon">๐๏ธ</span>
                        <span data-i18n="manage_shops">ุฅุฏุงุฑุฉ ุงููุญูุงุช</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Profile Page -->
        <section id="profilePage" class="page">
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Ccircle cx='60' cy='60' r='60' fill='%231F7A1F'/%3E%3Ctext x='60' y='75' font-size='48' fill='%23FFD700' text-anchor='middle' font-family='Arial'%3EU%3C/text%3E%3C/svg%3E" alt="Profile" id="profileAvatar">
                </div>
                <h2 class="profile-name" id="profileName" data-i18n="userName">ูุณุชุฎุฏู ScoutMe</h2>
                <div class="profile-wallet">
                    <span data-i18n="wallet_address">ุนููุงู ุงููุญูุธุฉ:</span>
                    <span id="profileWalletAddress">--</span>
                </div>
                <div class="trust-score">
                    <span class="stars" id="profileStars">โญโญโญโญโญ</span>
                    <span class="score" id="profileScore">5.0</span>
                </div>
            </div>
            <div class="profile-tabs">
                <button class="tab-btn active" data-tab="overview" data-i18n="overview">ูุธุฑุฉ ุนุงูุฉ</button>
                <button class="tab-btn" data-tab="stats" data-i18n="stats">ุงูุฅุญุตุงุฆูุงุช</button>
                <button class="tab-btn" data-tab="nfts" data-i18n="nfts">NFTs</button>
                <button class="tab-btn" data-tab="settings" data-i18n="settings">ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
            <div class="profile-content">
                <div class="tab-content active" id="overviewTab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">๐ฏ</div>
                            <div class="stat-value">156</div>
                            <div class="stat-label" data-i18n="goals">ุฃูุฏุงู</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">โก</div>
                            <div class="stat-value">89</div>
                            <div class="stat-label" data-i18n="assists">ุชูุฑูุฑุงุช</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">๐</div>
                            <div class="stat-value">12</div>
                            <div class="stat-label" data-i18n="awards">ุฌูุงุฆุฒ</div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" id="statsTab">
                    <p data-i18n="statsComingSoon">ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ ูุฑูุจุงู...</p>
                </div>
                <div class="tab-content" id="nftsTab">
                    <div id="userNftsContainer">
                        <!-- Dynamic NFTs -->
                    </div>
                </div>
                <div class="tab-content" id="settingsTab">
                    <div class="settings-list">
                        <div class="setting-item">
                            <span data-i18n="language">ุงููุบุฉ</span>
                            <span id="currentLangDisplay">ุงูุนุฑุจูุฉ</span>
                        </div>
                        <div class="setting-item">
                            <span data-i18n="notifications">ุงูุฅุดุนุงุฑุงุช</span>
                            <label class="switch">
                                <input type="checkbox" checked id="notificationsToggle" onchange="toggleNotificationsSettings()">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span data-i18n="darkMode">ุงููุถุน ุงููููู</span>
                            <label class="switch">
                                <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span data-i18n="app_commission">ุนูููุฉ ุงูุชุทุจูู (%)</span>
                            <span>5%</span>
                        </div>
                        <div class="setting-item">
                            <button class="btn-primary" onclick="linkPiWallet()" data-i18n="link_wallet">ุฑุจุท ูุญูุธุฉ Pi</button>
                        </div>
                        <div class="setting-item">
                            <button class="btn-danger" onclick="logout()" data-i18n="logout">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
                        </div>
                    </div>
                    <p class="dev-note" data-i18n="dev_note">ููุงุญุธุฉ: ููุฏูุน ุงูุญูููู ุนุจุฑ Pi ุงุณุชุนูู ุณูุฑูุฑ/Function ูุญูุงูุฉ PI_API_KEY.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Navigation Bar -->
    <nav class="bottom-nav">
        <button class="nav-btn active" data-page="homePage">
            <span class="nav-icon">๐</span>
            <span class="nav-label" data-i18n="home">ุงูุฑุฆูุณูุฉ</span>
        </button>
        <button class="nav-btn" data-page="discoverPage">
            <span class="nav-icon">๐</span>
            <span class="nav-label" data-i18n="discover">ุงุณุชูุดู</span>
        </button>
        <button class="nav-btn" data-page="talentsPage">
            <span class="nav-icon">โญ</span>
            <span class="nav-label" data-i18n="talents">ุงูููุงูุจ</span>
        </button>
        <button class="nav-btn" data-page="dashboardPage">
            <span class="nav-icon">๐</span>
            <span class="nav-label" data-i18n="dashboard">ููุญุฉ ุงูุชุญูู</span>
        </button>
        <button class="nav-btn" data-page="marketplacePage">
            <span class="nav-icon">๐๏ธ</span>
            <span class="nav-label" data-i18n="marketplace">ุงููุชุฌุฑ</span>
        </button>
        <button class="nav-btn" data-page="profilePage">
            <span class="nav-icon">๐ค</span>
            <span class="nav-label" data-i18n="profile">ุงูููู</span>
        </button>
    </nav>

    <!-- Modals -->
    
    <!-- Wallet Modal -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeWalletModal()">&times;</span>
            <h2 data-i18n="wallet">ุงููุญูุธุฉ</h2>
            <div class="wallet-balance-card">
                <div class="balance-label" data-i18n="currentBalance">ุงูุฑุตูุฏ ุงูุญุงูู</div>
                <div class="balance-amount" id="modalWalletBalance">0 Pi</div>
            </div>
            <div class="wallet-info">
                <p><strong data-i18n="wallet_address">ุนููุงู ุงููุญูุธุฉ:</strong></p>
                <p id="modalWalletAddress" class="wallet-address-text">--</p>
            </div>
            <div class="wallet-actions">
                <button class="wallet-action-btn" data-i18n="send">ุฅุฑุณุงู</button>
                <button class="wallet-action-btn" data-i18n="receive">ุงุณุชูุจุงู</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePaymentModal()">&times;</span>
            <h2 data-i18n="payment_with_pi">ุงูุฏูุน ุจู Pi</h2>
            <div id="paymentInfo">
                <!-- Dynamic payment details -->
            </div>
            <div class="payment-amount-selector">
                <label data-i18n="select_amount">ุงุฎุชุฑ ุงููุจูุบ:</label>
                <select id="piPayAmount">
                    <option value="0.5">0.5 Pi</option>
                    <option value="1" selected>1 Pi</option>
                    <option value="2">2 Pi</option>
                </select>
            </div>
            <button class="btn-primary btn-full" onclick="confirmPayment()">
                <span data-i18n="confirm_payment">ุชุฃููุฏ ุงูุฏูุน</span>
            </button>
        </div>
    </div>

    <!-- Add Talent Modal -->
    <div id="addTalentModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddTalentModal()">&times;</span>
            <h2 data-i18n="add_talent">ุฅุถุงูุฉ ูููุจุฉ</h2>
            <form id="addTalentForm" class="form-modern">
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="player_name">ุงุณู ุงููุงุนุจ *</label>
                        <input type="text" name="name" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="age">ุงูุนูุฑ *</label>
                        <input type="number" name="age" required min="5" max="100">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="sport">ุงูุฑูุงุถุฉ *</label>
                        <select name="sport" required id="talentSportSelect">
                            <!-- Dynamic sports -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="position">ุงููุฑูุฒ/ุงููููุน</label>
                        <input type="text" name="position">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="country">ุงูุฏููุฉ *</label>
                        <select name="country" required id="talentCountrySelect">
                            <!-- Dynamic countries -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="city">ุงููุฏููุฉ *</label>
                        <input type="text" name="city" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="team">ุงููุฑูู</label>
                    <select name="team" id="talentTeamSelect">
                        <option value="">-- ุงุฎุชุฑ ูุฑูู --</option>
                        <!-- Dynamic teams -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label data-i18n="academy">ุงูุฃูุงุฏูููุฉ</label>
                    <select name="academy" id="talentAcademySelect">
                        <option value="">-- ุงุฎุชุฑ ุฃูุงุฏูููุฉ --</option>
                        <!-- Dynamic academies -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label data-i18n="highlights_video">ููุฏูู Highlights (ุฑุงุจุท YouTube)</label>
                    <input type="url" name="highlights" placeholder="https://youtube.com/...">
                </div>
                
                <div class="form-group">
                    <label data-i18n="player_image">ุตูุฑุฉ ุงููุงุนุจ</label>
                    <input type="file" name="image" accept="image/*" id="talentImageInput">
                </div>
                
                <div class="form-group">
                    <label data-i18n="description">ุงููุตู</label>
                    <textarea name="description" rows="4"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddTalentModal()" data-i18n="cancel">ุฅูุบุงุก</button>
                    <button type="submit" class="btn-primary" data-i18n="save">ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Team Modal -->
    <div id="addTeamModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddTeamModal()">&times;</span>
            <h2 data-i18n="add_team">ุฅุถุงูุฉ ูุฑูู</h2>
            <form id="addTeamForm" class="form-modern">
                <div class="form-group">
                    <label data-i18n="team_name">ุงุณู ุงููุฑูู *</label>
                    <input type="text" name="name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="sport">ุงูุฑูุงุถุฉ *</label>
                        <select name="sport" required>
                            <!-- Dynamic sports -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="level">ุงููุณุชูู</label>
                        <select name="level">
                            <option value="ูุญุชุฑู">ูุญุชุฑู</option>
                            <option value="Elite">Elite</option>
                            <option value="ุดุจุงุจ">ุดุจุงุจ</option>
                            <option value="ูุงุดุฆูู">ูุงุดุฆูู</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="country">ุงูุฏููุฉ *</label>
                        <select name="country" required>
                            <!-- Dynamic countries -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="city">ุงููุฏููุฉ *</label>
                        <input type="text" name="city" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="coach">ุงููุฏุฑุจ</label>
                    <input type="text" name="coach">
                </div>
                
                <div class="form-group">
                    <label data-i18n="players_list">ูุงุฆูุฉ ุงููุงุนุจูู (ุงุฎุชุฑ ูู ุงููุงุฆูุฉ)</label>
                    <select name="players" multiple size="6" id="teamPlayersSelect">
                        <!-- Dynamic players -->
                    </select>
                    <small data-i18n="select_multiple_help">ุงุถุบุท Ctrl (ุฃู Cmd) ููุงุฎุชูุงุฑ ุงููุชุนุฏุฏ</small>
                </div>
                
                <div class="form-group">
                    <label data-i18n="team_logo">ุดุนุงุฑ ุงููุฑูู</label>
                    <input type="file" name="logo" accept="image/*">
                </div>
                
                <div class="form-group">
                    <label data-i18n="location_coordinates">ุงูุฅุญุฏุงุซูุงุช (ููุฎุฑูุทุฉ)</label>
                    <input type="text" name="coordinates" placeholder="Lat, Lng (ูุซุงู: 35.8256, 10.6341)">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddTeamModal()" data-i18n="cancel">ุฅูุบุงุก</button>
                    <button type="submit" class="btn-primary" data-i18n="save">ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Academy Modal -->
    <div id="addAcademyModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddAcademyModal()">&times;</span>
            <h2 data-i18n="add_academy">ุฅุถุงูุฉ ุฃูุงุฏูููุฉ</h2>
            <form id="addAcademyForm" class="form-modern">
                <div class="form-group">
                    <label data-i18n="academy_name">ุงุณู ุงูุฃูุงุฏูููุฉ *</label>
                    <input type="text" name="name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="sport">ุงูุฑูุงุถุฉ *</label>
                        <select name="sport" required>
                            <!-- Dynamic sports -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="director">ุงููุฏูุฑ</label>
                        <input type="text" name="director">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="country">ุงูุฏููุฉ *</label>
                        <select name="country" required>
                            <!-- Dynamic countries -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="city">ุงููุฏููุฉ *</label>
                        <input type="text" name="city" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="address">ุงูุนููุงู ุงููุงูู</label>
                    <input type="text" name="address">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="phone">ุงููุงุชู</label>
                        <input type="tel" name="phone">
                    </div>
                    <div class="form-group">
                        <label data-i18n="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" name="email">
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="website">ุงููููุน ุงูุฅููุชุฑููู</label>
                    <input type="url" name="website" placeholder="https://...">
                </div>
                
                <div class="form-group">
                    <label data-i18n="description">ุงููุตู</label>
                    <textarea name="description" rows="4"></textarea>
                </div>
                
                <div class="form-group">
                    <label data-i18n="location_coordinates">ุงูุฅุญุฏุงุซูุงุช (ููุฎุฑูุทุฉ)</label>
                    <input type="text" name="coordinates" placeholder="Lat, Lng">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddAcademyModal()" data-i18n="cancel">ุฅูุบุงุก</button>
                    <button type="submit" class="btn-primary" data-i18n="save">ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Shop Modal -->
    <div id="addShopModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeAddShopModal()">&times;</span>
            <h2 data-i18n="add_shop">ุฅุถุงูุฉ ูุญู</h2>
            <form id="addShopForm" class="form-modern">
                <div class="form-group">
                    <label data-i18n="shop_name">ุงุณู ุงููุญู *</label>
                    <input type="text" name="name" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="category">ุงููุฆุฉ *</label>
                        <select name="category" required>
                            <option value="ูุนุฏุงุช ุฑูุงุถูุฉ">ูุนุฏุงุช ุฑูุงุถูุฉ</option>
                            <option value="ููุงุจุณ ุฑูุงุถูุฉ">ููุงุจุณ ุฑูุงุถูุฉ</option>
                            <option value="ุฃุญุฐูุฉ ุฑูุงุถูุฉ">ุฃุญุฐูุฉ ุฑูุงุถูุฉ</option>
                            <option value="ููููุงุช ุบุฐุงุฆูุฉ">ููููุงุช ุบุฐุงุฆูุฉ</option>
                            <option value="ุฃุฌูุฒุฉ ุฑูุงุถูุฉ">ุฃุฌูุฒุฉ ุฑูุงุถูุฉ</option>
                            <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="owner">ุงููุงูู</label>
                        <input type="text" name="owner">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="country">ุงูุฏููุฉ *</label>
                        <select name="country" required>
                            <!-- Dynamic countries -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="city">ุงููุฏููุฉ *</label>
                        <input type="text" name="city" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="address">ุงูุนููุงู ุงููุงูู</label>
                    <input type="text" name="address">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="phone">ุงููุงุชู</label>
                        <input type="tel" name="phone">
                    </div>
                    <div class="form-group">
                        <label data-i18n="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" name="email">
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="products">ุงูููุชุฌุงุช ุงูุฃุณุงุณูุฉ</label>
                    <textarea name="products" rows="3" placeholder="ูุซุงู: ูุฑุงุช ูุฏูุ ููุงุจุณ ุชุฏุฑูุจุ ุฃุญุฐูุฉ..."></textarea>
                </div>
                
                <div class="form-group">
                    <label data-i18n="location_coordinates">ุงูุฅุญุฏุงุซูุงุช (ููุฎุฑูุทุฉ)</label>
                    <input type="text" name="coordinates" placeholder="Lat, Lng">
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddShopModal()" data-i18n="cancel">ุฅูุบุงุก</button>
                    <button type="submit" class="btn-primary" data-i18n="save">ุญูุธ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Detail View Modal (ููุนุฑุถ ุงูุชูุตููู) -->
    <div id="detailModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" onclick="closeDetailModal()">&times;</span>
            <div id="detailContent">
                <!-- Dynamic detailed content -->
            </div>
        </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notificationsPanel" class="notifications-panel">
        <div class="notifications-header">
            <h3 data-i18n="notifications">ุงูุฅุดุนุงุฑุงุช</h3>
            <button class="btn-clear-notifications" onclick="clearAllNotifications()" data-i18n="clear_all">ูุณุญ ุงููู</button>
        </div>
        <div class="notifications-list" id="notificationsList">
            <!-- Dynamic notifications -->
        </div>
    </div>

    <!-- Pi SDK -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>
        // Pi SDK Initialization
        try {
            const params = new URLSearchParams(window.location.search || '');
            const sandboxParam = params.get('sandbox');
            const prodParam = params.get('prod');

            if (sandboxParam === '1') localStorage.setItem('PI_SANDBOX', '1');
            if (prodParam === '1') localStorage.setItem('PI_SANDBOX', '0');

            const persistedSandbox = localStorage.getItem('PI_SANDBOX') === '1';
            const hostSandbox = String(window.location.hostname || '').toLowerCase().includes('sandbox.minepi.com');
            const refSandbox = String(document.referrer || '').toLowerCase().includes('sandbox.minepi.com');
            let ancestorSandbox = false;
            try {
                const origins = window.location.ancestorOrigins;
                if (origins && typeof origins.length === 'number') {
                    for (let i = 0; i < origins.length; i++) {
                        if (String(origins[i] || '').toLowerCase().includes('sandbox.minepi.com')) {
                            ancestorSandbox = true;
                            break;
                        }
                    }
                }
            } catch (e) {}

            let inIframe = false;
            try { inIframe = window.self !== window.top; } catch (e) { inIframe = true; }

            const useSandbox = sandboxParam === '1' || (sandboxParam !== '0' && (persistedSandbox || hostSandbox || (inIframe && (refSandbox || ancestorSandbox))));

            if (window.Pi && typeof window.Pi.init === 'function') {
                window.Pi.init({ version: "2.0", sandbox: useSandbox });
            }
        } catch (e) {
            console.warn('Pi.init failed', e);
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
